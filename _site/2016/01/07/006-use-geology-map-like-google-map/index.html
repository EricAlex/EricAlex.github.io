<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The secret of getting ahead is getting started.">

    <title>Use geology maps like using Google Maps on your iPad - Xin Wang's Blog</title>

    <link rel="canonical" href="http://ericalex.github.io//2016/01/07/006-use-geology-map-like-google-map/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        });
        
        MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Xin Wang's Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/post-006/bg.png')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Use geology maps like using Google Maps on your iPad</h1>
                    
                    <h2 class="subheading"></h2>
                    
                    <span class="meta">Posted by Xin Wang on January 7, 2016</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>Imagine you are doing geology surveys in the field, enjoying geology map services as powerful as Google Maps: 
locating yourself on the map, zooming in, zooming out, drawing lines to get the stratigraphic profile, 
marking down a sampling site, taking a selfie with your rock sample, searching for nearby geologists, 
making small talks online, sipping your ice cold beer (I'm kidding, no beer provided).</p>

<p>Well, this step-by-step post will walk you through making above imaginations come true.
</p>

<h2 class="section-heading">Requirements</h2>

<p>First you need a map scanner to digitize your geology maps.</p>
<p>You will need ArcGIS, QGIS or similar software to georeference your map and trim off overlapping edges.</p>
<p>You will need TileMill or Mapbox Studio to generate data for your geology map service, both offline and online.</p>

<h2 class="section-heading">Digitizing geology maps</h2>

<p>It depends on where you get your geology maps and the scale of your maps. If you downloaded your maps as *.jpeg, *.png, *.bmp, etc., 
from the Internet, no bother scan your geology maps. If you bought or borrowed your paper maps, scan your maps, 
as the geology map of Sichuan Province's Dege County, China, shown bellow:</p>

<p><a href="#">
    <img src="/img/post-006/geology-map.png" alt="Geology Map" />
</a>
<span class="caption text-muted">Figure 1. Geology map of Dege County, Sichuan Province, China.</span></p>

<p>Of course you can refine your scanned maps in GIS softwares, turn raster maps into vector maps, 
turn informations on the map into well-orgnized GeoÔºçspatial Databases, 
on the database you can develop very high-level and powerful services. 
But that cost a lot of energy, and money if you are developing it for commercial use. 
I am positive it will be a good investment. Anyway, as I was not funded or encouraged, and I developed this for my own use, 
I left geology maps as rasters and moved to the next step.</p>

<h2 class="section-heading">Georeferencing maps and triming edges</h2>

<p>Open ArcMap, add one piece of geology map, 
notice that normally you will find points at four corners where you can read their &lt; longitude latitude &gt;. 
Select the tool in georeferencing toolbar highlighed with red frame in Fig 2, left click on one of the &lt; longitude latitude &gt; known points, 
then right click on it, select "Input X and Y", then enter its &lt; longitude latitude &gt;. After processing all points with above procedures, 
click georeferencing-&gt;Update Georeferencing.</p>

<p><a href="#">
    <img src="/img/post-006/georeferencing.png" alt="Georeferencing" />
</a>
<span class="caption text-muted">Figure 2. Procedure of georeferencing geology maps.</span></p>

<p>Adjacent geology maps' edges will overlap after georeferencing (Fig 3).</p>

<p><a href="#">
    <img src="/img/post-006/overlapping-edges.png" alt="Overlapping edges" />
</a>
<span class="caption text-muted">Figure 3. Overlapping edges of adjacent geology maps.</span></p>

<p>Edges should be trimed off when mosaicing these maps together.</p>
<p>Create new polygon shapefile and add it in, sketch a polygon that just covers the mapping boundary of the geology map. 
Use this polygon clip the raster map: ArcToolbox-&gt;Data Management Tools-&gt;Raster-&gt;Raster Processing-&gt;Clip.</p>
<p>Define projection of the cliped map: ArcToolbox-&gt;Data Management Tools-&gt;Projections and Tranformations-&gt;Define Projection. 
Define it as "WGS 1984 UTM Zone xx", according to its zone number.</p>
<p>Save the cliped and projection defined map as *.tif: ArcToolbox-&gt;Data Management Tools-&gt;Raster-&gt;Raster Dataset-&gt;Copy Raster. 
Include .tif as the extension of your output file.</p>
<p>The final result so far looks like Fig 4.</p>

<p><a href="#">
    <img src="/img/post-006/edges-trimed.png" alt="Edges Trimed" />
</a>
<span class="caption text-muted">Figure 4. Overlapping edges were trimed off.</span></p>

<h2 class="section-heading">Importing geology maps to TileMill (or MapBox Studio)</h2>

<p>Import saved geotiff maps into TileMill: open TileMill, new Project and name it, click the tool highlighted with red frame in Fig 5, 
click add layer, browse and select geotiff maps, "SRS" select "WGS84", click "Save&amp;Style".</p>

<p><a href="#">
    <img src="/img/post-006/import-to-tilemill.png" alt="Import to TileMill" />
</a>
<span class="caption text-muted">Figure 5. Importing maps into TileMill.</span></p>

<h2 class="section-heading">Rendering your maps</h2>

<p>As the right side column of Fig 5 shows, you can edit the script that describe the render style of your maps. 
There is detailed documentation of TileMill tells you how to do it. Fell free to customize your geology maps.</p>

<p>Of course you can add other vector layers: roads, villages, the faults that you are studying, previous field trips' traces, 
previous sampling sites. The only limitation is your imagination.</p>

<p>It is better to collect geology maps with different scales of the same region, as 1:1,000,000, 1:500,000, 1:200,000, etc. 
In TileMill you can set different scale maps to appear in different zoom level ranges 
(If you are familiar with the comcept of raster pyramids in ArcGIS and zoom level of Google Maps). 
So you can control what kind of details will appear at different zoom level (scale).</p>

<h2 class="section-heading">Exporting your geology map service data</h2>

<p>After you add all features that you wanted and are satisfied with your map, 
you can export your geology map service data and release your service now. Click Export-&gt;MBTiles, then Fig 6 will appear, 
you can resize and drag the rectangle to set the extent of your export region, there are other parameters you can set: 
zoom range, Centor and MetaTile size, the export extent and zoom range will decide the size of your output file, so set them carefully, 
you wouldn't like to store a 20G MBTiles file in your iPad.</p>

<p><a href="#">
    <img src="/img/post-006/export-map-data.png" alt="Export Map Data" />
</a>
<span class="caption text-muted">Figure 6. Exporting geology map service data: MbTiles.</span></p>

<h2 class="section-heading">Using your geology map service on iPad</h2>

<p>There are several Apps for iPad to view MBTiles file, MBTiles GPS is a free and simple one. 
It is still being developed, as shown in Fig 7A and 7B. Maybe too simple, 
fancy features like tracing and marking locations are not included. But it will satisfy your basic usage.</p>

<p><a href="#">
    <img src="/img/post-006/large-scale-and-detailed-map.png" alt="Map on iPad" />
</a>
<span class="caption text-muted">Figure 7. Using geology map service on iPad. A: Large scale view; B: Detailed view.</span></p>

<p>If you want to release your geology map services online, you may need <a href="https://www.mapbox.com/">Mapbox</a>'s service. 
They made it very simple and convenient for you.</p>

<p>If you want your geology map services to have fancy features, you may need to develop your own Apps. 
Again you can use Map App framework provided by <a href="https://www.mapbox.com/">Mapbox</a>, 
both for iOS (<a href="https://www.mapbox.com/ios-sdk/">Mapbox iOS SDK</a>) 
and Android (<a href="https://www.mapbox.com/android-sdk/">Mapbox Android SDK</a>).</p>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2015/12/25/005-structrock/" data-toggle="tooltip" data-placement="top" title="Structrock: a cross-platform outcrop point cloud processing system">&larr; Previous Post</a>
                    </li>
                    
                    
                </ul>
                
                <div id="disqus_thread"></div>
                <script>
                /**
                * *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                * *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
                * */
                /*
                var disqus_config = function () {
                    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                    };
                */
                (function() {  // DON'T EDIT BELOW THIS LINE
                var d = document, s = d.createElement('script');
                
                s.src = '//xinwang.disqus.com/embed.js';
                
                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
                })();
                </script>
                <noscript>Please enable JavaScript to view the 
                    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
                    comments powered by Disqus.</a></noscript>
            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    
                    
                    <li>
                        <a href="https://github.com/EricAlex">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="http://weibo.com/u/1816641837">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Xin Wang's Blog 2016</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>

    
</body>

</html>
